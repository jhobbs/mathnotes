import{p as v}from"./p5.min-DodNUE7G.js";class f{constructor(e,s,r,a){this.pos=e.createVector(s,r),this.charge=a,this.inertia=e.createVector(0,0),a>0?this.color=e.color(255,0,0):this.color=e.color(0,0,255)}paint(e){e.colorMode(e.RGB),e.noStroke(),this.charge>0?e.fill(255,0,0):e.fill(0,0,255),e.circle(this.pos.x,this.pos.y,e.sqrt(e.abs(this.charge)*100/e.PI)-5)}get m(){return this.charge}addM(e){this.charge+=e}get p(){return this.pos}addPos(e){this.inertia.add(e),this.pos.sub(this.inertia)}}class x{constructor(e,s,r){this.p=e,this.pos=e.createVector(s,r),this.mag=e.createVector(0,0)}update(e){this.mag=k(this.p,e,this.pos,-1)}paint(e){const s=e.dist(this.pos.x,this.pos.y,this.pos.x+this.mag.x*100,this.pos.y+this.mag.y*100);e.stroke(e.map(s,0,50,150,255),255,100),W(e,this.pos.x,this.pos.y,this.pos.x-this.mag.x*200,this.pos.y-this.mag.y*200,3)}}function k(o,e,s,r){const a=o.createVector(0,0);for(let n=0;n<e.length;n++){const h=e[n].p,l=e[n].m*100,c=o.dist(h.x,h.y,s.x,s.y);let w=o.sin(o.abs(h.x-s.x)/c),t=o.sin(o.abs(h.y-s.y)/c);s.x<h.x&&(w=-w),s.y<h.y&&(t=-t),a.add(o.createVector(-r*l/o.pow(c,2)*w,-r*l/o.pow(c,2)*t))}return a}function W(o,e,s,r,a,n){o.line(e,s,r,a),o.push();const h=o.atan2(s-a,e-r);o.translate(r,a),o.rotate(h-o.HALF_PI),o.triangle(-n*.6,n*1.5,n*.6,n*1.5,0,0),o.pop()}function C(o,e){let s=null,r=[],a=[];const n=30;let h=!1;const l=document.createElement("div");l.style.textAlign="center",l.id=`field-${Date.now()}`,o.appendChild(l);const c=t=>{t.setup=()=>{t.noStroke();let i,d;t.windowWidth<768?(i=t.windowWidth-20,d=(t.windowWidth-20)*.65):(i=(e==null?void 0:e.width)||o.offsetWidth-20||t.windowWidth*.8,d=(e==null?void 0:e.height)||i*.6),t.createCanvas(i,d).parent(l),t.background(51),t.frameRate(60);for(let u=t.width/n;u<t.width;u+=t.width/n)for(let m=t.height/n;m<t.height;m+=t.height/n)a.push(new x(t,u,m))},t.draw=()=>{t.colorMode(t.RGB),t.background(51),t.noStroke();for(let i=0;i<r.length;i++)r[i].paint(t);if(h)for(let i=0;i<r.length;i++){const d=r[i].p,y=r[i].m,u=k(t,r,t.createVector(d.x,d.y),y);r[i].addPos(u)}t.stroke(250),t.strokeWeight(2),t.colorMode(t.HSB);for(let i=0;i<a.length;i++)a[i].update(r),a[i].paint(t)},t.mouseClicked=()=>{let i=-1;t.keyIsDown(t.CONTROL)&&(i=1),r.push(new f(t,t.mouseX,t.mouseY,i*15))},t.keyPressed=()=>{if(t.keyCode===32)return h=!h,!1},t.windowResized=()=>{if(e!=null&&e.width&&(e!=null&&e.height))return;let i,d;t.windowWidth<768?(i=t.windowWidth-20,d=(t.windowWidth-20)*.65):(i=o.offsetWidth-20||t.windowWidth*.8,d=i*.6),t.resizeCanvas(i,d)}};s=new v(c);const w=t=>{(t.code==="Space"||t.keyCode===32)&&t.preventDefault()};return document.addEventListener("keydown",w,!0),{cleanup:()=>{s&&(s.remove(),s=null),document.removeEventListener("keydown",w,!0),o.innerHTML=""},resize:()=>{s&&s.windowResized&&s.windowResized()},pause:()=>{s&&s.noLoop()},resume:()=>{s&&s.loop()}}}export{C as default};
//# sourceMappingURL=electric-field-CoGGpvCG.js.map
