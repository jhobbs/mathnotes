{% extends "base.html" %}

{% block title %}{{ config.SITE_TITLE }} - Home{% endblock %}

{% block description %}Comprehensive mathematics notes and interactive demonstrations covering algebra, calculus, complex analysis, differential equations, linear algebra, physics, and more educational topics.{% endblock %}

{% block header_link %}{{ url_for('mathnotes_index') }}{% endblock %}


{% macro render_item(item, level) %}
    {% if item.is_subdir %}
        <li class="content-item">
            <div class="subdirectory" data-level="{{ level }}">
                <h5 class="subdir-header">{{ item.name }}</h5>
                <ul class="subdir-files">
                    {% for subitem in item.files %}
                        {{ render_item(subitem, level + 1) }}
                    {% endfor %}
                </ul>
            </div>
        </li>
    {% else %}
        <li {% if level == 0 %}class="content-item"{% endif %}>
            <a href="{{ url_for('serve_content', filepath=item.path) }}" class="content-link">
                {{ item.name }}
            </a>
        </li>
    {% endif %}
{% endmacro %}

{% block content %}
<h2>Mathematics Notes</h2>
<p>{{ config.SITE_DESCRIPTION }}</p>

<h3>Topics</h3>
<p class="index-help-text">Click on any section to expand and view its contents</p>

<div class="sections-container">
    {% for section in sections %}
    <div class="collapsible-section">
        <div class="section-header" data-section="toggle">
            <h4 class="section-title">{{ section.name }}</h4>
            <span class="toggle-icon">â–¶</span>
        </div>
        <div class="section-content">
            <ul class="content-list">
                {% for item in section.content %}
                    {{ render_item(item, 0) }}
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endfor %}
</div>

<h3>Tools & Resources</h3>
<div class="meta-pages">
    <ul class="meta-pages-list">
        <li><a href="{{ url_for('definition_index') }}" class="meta-link">Definition Index</a> - Browse all mathematical definitions</li>
        <li><a href="{{ url_for('theorem_index') }}" class="meta-link">Theorem Index</a> - Browse all theorems, lemmas, and corollaries</li>
        <li><a href="{{ url_for('demos') }}" class="meta-link">Demo Viewer</a> - Interactive mathematical demonstrations</li>
    </ul>
</div>

{% endblock %}
